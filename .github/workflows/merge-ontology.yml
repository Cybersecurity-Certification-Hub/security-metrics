name: Merge Ontology

on: [pull_request]

jobs:
    merge-ontology:
        runs-on: ubuntu-latest

        steps:
        - name: Checkout repository
          uses: actions/checkout@v2
        - name: Download ROBOT
          run: |
            wget https://github.com/ontodev/robot/releases/download/v1.9.5/robot.jar
        - name: Merge owx files
          uses: docker://openjdk:11
          with:
            args: java -jar robot.jar merge 
              --catalog ontology/1.0/catalog-v001.xml
              --input ontology/1.0/ontology.owx 
              --input ontology/1.0/resource.owx 
              --input ontology/1.0/core.owx 
              --input ontology/1.0/data.owx 
              --input ontology/1.0/resource/application.owx 
              --input ontology/1.0/resource/document.owx 
              --input ontology/1.0/resource/human_resources.owx 
              --input ontology/1.0/resource/infrastructure.owx 
              --input ontology/1.0/resource/ml.owx 
              --input ontology/1.0/core/framework.owx 
              --input ontology/1.0/core/functionality.owx 
              --input ontology/1.0/core/properties.owx 
              --input ontology/1.0/core/security.owx 
              --output ontology/1.0/merged/merged-ontology.owl 
        - name: Convert to owx
          uses: docker://openjdk:11
          with:
            args: java -jar robot.jar convert 
              -i ontology/1.0/merged/merged-ontology.owl 
              --format OWL/XML 
              -o ontology/1.0/merged/merged-ontology.owx
        # - name: Validate merged ontology
        #   run: |
        #     java -jar robot.jar verify 
        #       --input src/ontology/merged-ontology.owl 
        #       --output src/ontology/validation-report.txt
        - name: Upload Artifact merged-ontology.owl
          uses: actions/upload-artifact@v4
          with:
            name: merged-ontology
            path: ontology/1.0/merged/merged-ontology.owl

            